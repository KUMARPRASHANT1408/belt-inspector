<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Belt Inspector — Login</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="css/styles.css">
  <!-- Firebase compat (simple for beginners) -->
  <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <main class="card center">
    <h1>Belt Inspector</h1>
    <p class="muted">Login or Sign up with your email (recommended: corporate email)</p>

    <label>Email
      <input id="email" type="email" placeholder="your.email@company.com">
    </label>
    <label>Password
      <input id="password" type="password" placeholder="Minimum 6 characters">
    </label>

    <div class="row">
      <button id="loginBtn" class="primary">Login</button>
      <button id="signupBtn" class="secondary">Sign up</button>
    </div>

    <p id="msg" class="muted"></p>

    <p class="muted small">If you are an admin, add your user to the Firestore `admins` collection (admin must do this in Firebase Console).</p>
  </main>

<script>
  // ========== PASTE YOUR FIREBASE CONFIG OBJECT HERE ==========
  // Example:
  // const firebaseConfig = {
  // apiKey: "...",
  // authDomain: "PROJECT.firebaseapp.com",
  // projectId: "PROJECT",
  // storageBucket: "...",
  // messagingSenderId: "...",
  // appId: "..."
  // }
  const firebaseConfig = /* FIREBASE_CONFIG */ {};

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  const loginBtn = document.getElementById('loginBtn');
  const signupBtn = document.getElementById('signupBtn');
  const msg = document.getElementById('msg');

  loginBtn.onclick = async () => {
    msg.innerText = '';
    const email = document.getElementById('email').value.trim();
    const pw = document.getElementById('password').value;
    if(!email || !pw) { msg.innerText = 'Enter email and password.'; return; }
    try {
      await auth.signInWithEmailAndPassword(email, pw);
      // redirect to dashboard
      window.location = 'dashboard.html';
    } catch(err) {
      msg.innerText = err.message;
    }
  };

  signupBtn.onclick = async () => {
    msg.innerText = '';
    const email = document.getElementById('email').value.trim();
    const pw = document.getElementById('password').value;
    if(!email || !pw) { msg.innerText = 'Enter email and password.'; return; }
    try {
      await auth.createUserWithEmailAndPassword(email, pw);
      msg.innerText = 'Signup complete — now click Login.';
    } catch(err) {
      msg.innerText = err.message;
    }
  };

  // If user already logged in, redirect to dashboard
  auth.onAuthStateChanged(user => { if(user) window.location = 'dashboard.html'; });
</script>
</body>
</html>